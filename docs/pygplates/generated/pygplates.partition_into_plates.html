<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>pygplates.partition_into_plates &mdash; pygplates 2.1.0.18 documentation</title>
    
    <link rel="stylesheet" href="../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '2.1.0.18',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="top" title="pygplates 2.1.0.18 documentation" href="../index.html" />
    <link rel="up" title="Reference" href="../pygplates_reference.html" />
    <link rel="next" title="pygplates.PlatePartitioner" href="pygplates.PlatePartitioner.html" />
    <link rel="prev" title="pygplates.synchronise_crossovers" href="pygplates.synchronise_crossovers.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="pygplates.PlatePartitioner.html" title="pygplates.PlatePartitioner"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="pygplates.synchronise_crossovers.html" title="pygplates.synchronise_crossovers"
             accesskey="P">previous</a> |</li>
        <li><a href="../index.html">pygplates 2.1.0.18 documentation</a> &raquo;</li>
          <li><a href="../pygplates_reference.html" accesskey="U">Reference</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="pygplates-partition-into-plates">
<h1>pygplates.partition_into_plates<a class="headerlink" href="#pygplates-partition-into-plates" title="Permalink to this headline">¶</a></h1>
<dl class="function">
<dt id="pygplates.partition_into_plates">
<tt class="descclassname">pygplates.</tt><tt class="descname">partition_into_plates</tt><big>(</big><em>partitioning_features, rotation_model, features_to_partition,         [properties_to_copy=[PartitionProperty.reconstruction_plate_id]],         [reconstruction_time=0],         [partition_method=PartitionMethod.split_into_plates],         [partition_return=PartitionReturn.combined_partitioned_and_unpartitioned],         [sort_partitioning_plates=SortPartitioningPlates.by_partition_type_then_plate_id]</em><big>)</big><a class="headerlink" href="#pygplates.partition_into_plates" title="Permalink to this definition">¶</a></dt>
<dd><p>Partition features into plates.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>partitioning_features</strong> (<a class="reference internal" href="pygplates.FeatureCollection.html#pygplates.FeatureCollection" title="pygplates.FeatureCollection"><tt class="xref py py-class docutils literal"><span class="pre">FeatureCollection</span></tt></a>, or string, or <a class="reference internal" href="pygplates.Feature.html#pygplates.Feature" title="pygplates.Feature"><tt class="xref py py-class docutils literal"><span class="pre">Feature</span></tt></a>,         or sequence of <a class="reference internal" href="pygplates.Feature.html#pygplates.Feature" title="pygplates.Feature"><tt class="xref py py-class docutils literal"><span class="pre">Feature</span></tt></a>, or sequence of any combination of those four types) &#8211; the partitioning features</li>
<li><strong>rotation_model</strong> (<a class="reference internal" href="pygplates.RotationModel.html#pygplates.RotationModel" title="pygplates.RotationModel"><tt class="xref py py-class docutils literal"><span class="pre">RotationModel</span></tt></a> or <a class="reference internal" href="pygplates.FeatureCollection.html#pygplates.FeatureCollection" title="pygplates.FeatureCollection"><tt class="xref py py-class docutils literal"><span class="pre">FeatureCollection</span></tt></a> or string         or sequence of <a class="reference internal" href="pygplates.FeatureCollection.html#pygplates.FeatureCollection" title="pygplates.FeatureCollection"><tt class="xref py py-class docutils literal"><span class="pre">FeatureCollection</span></tt></a> instances and/or strings) &#8211; A rotation model or a rotation feature collection or a rotation         filename or a sequence of rotation feature collections and/or rotation filenames</li>
<li><strong>features_to_partition</strong> (<a class="reference internal" href="pygplates.FeatureCollection.html#pygplates.FeatureCollection" title="pygplates.FeatureCollection"><tt class="xref py py-class docutils literal"><span class="pre">FeatureCollection</span></tt></a>, or string, or <a class="reference internal" href="pygplates.Feature.html#pygplates.Feature" title="pygplates.Feature"><tt class="xref py py-class docutils literal"><span class="pre">Feature</span></tt></a>,         or sequence of <a class="reference internal" href="pygplates.Feature.html#pygplates.Feature" title="pygplates.Feature"><tt class="xref py py-class docutils literal"><span class="pre">Feature</span></tt></a>, or sequence of any combination of those four types) &#8211; the features to be partitioned</li>
<li><strong>properties_to_copy</strong> (a sequence of any combination of <a class="reference internal" href="pygplates.PropertyName.html#pygplates.PropertyName" title="pygplates.PropertyName"><tt class="xref py py-class docutils literal"><span class="pre">PropertyName</span></tt></a> and         the <em>PartitionProperty</em> enumeration values (see table below)) &#8211; the properties to copy from partitioning plate features to the partitioned features         (defaults to just the reconstruction plate ID)</li>
<li><strong>reconstruction_time</strong> (float or <a class="reference internal" href="pygplates.GeoTimeInstant.html#pygplates.GeoTimeInstant" title="pygplates.GeoTimeInstant"><tt class="xref py py-class docutils literal"><span class="pre">GeoTimeInstant</span></tt></a>) &#8211; the specific geological time to reconstruct/resolve the         <em>partitioning_features</em> to (defaults to zero)</li>
<li><strong>partition_method</strong> (a <em>PartitionMethod</em> enumeration value (see table below)) &#8211; how the features are to be partitioned by the partitioning plates (defaults to <em>PartitionMethod.split_into_plates</em>)</li>
<li><strong>partition_return</strong> (a <em>PartitionReturn</em> enumeration value (see table below)) &#8211; how to return the partitioned and unpartitioned features and whether to include the partitioning plates         (defaults to <em>PartitionReturn.combined_partitioned_and_unpartitioned</em>)</li>
<li><strong>sort_partitioning_plates</strong> (a <em>SortPartitioningPlates</em> enumeration value (see table below), or None) &#8211; optional sort order of partitioning plates         (defaults to <em>SortPartitioningPlates.by_partition_type_then_plate_id</em>)</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">the partitioned and unpartitioned features         (<strong>note:</strong> new features are always returned, never the originals passed in via <em>features_to_partition</em>)</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">depends on <em>partition_return</em> (see table below)</p>
</td>
</tr>
</tbody>
</table>
<p>The features in <em>features_to_partition</em> are tested for overlap/intersection with the partitioning plates using the partition method
specified by <em>partition_method</em>. Properties are copied from the partitioning plate features to the
features partitioned by them as specified by <em>properties_to_copy</em> (by default this is only the reconstruction plate ID).</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">New features are always returned. The original features (passed into the <em>features_to_partition</em> argument) are never modified or returned.</p>
</div>
<p>The partitioning plates are generated internally by <a class="reference internal" href="pygplates.reconstruct.html#pygplates.reconstruct" title="pygplates.reconstruct"><tt class="xref py py-func docutils literal"><span class="pre">reconstructing</span> <span class="pre">any</span> <span class="pre">regular</span> <span class="pre">geological</span> <span class="pre">features</span></tt></a>
and <a class="reference internal" href="pygplates.resolve_topologies.html#pygplates.resolve_topologies" title="pygplates.resolve_topologies"><tt class="xref py py-func docutils literal"><span class="pre">resolving</span> <span class="pre">any</span> <span class="pre">topological</span> <span class="pre">features</span></tt></a> in <em>partitioning_features</em> using the rotation model and
optional reconstruction time.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Only those reconstructed/resolved geometries that contain a <em>polygon</em> boundary are actually used for partitioning.
For <a class="reference internal" href="pygplates.resolve_topologies.html#pygplates.resolve_topologies" title="pygplates.resolve_topologies"><tt class="xref py py-func docutils literal"><span class="pre">resolved</span> <span class="pre">topologies</span></tt></a> this includes <a class="reference internal" href="pygplates.ResolvedTopologicalBoundary.html#pygplates.ResolvedTopologicalBoundary" title="pygplates.ResolvedTopologicalBoundary"><tt class="xref py py-class docutils literal"><span class="pre">ResolvedTopologicalBoundary</span></tt></a> and
<a class="reference internal" href="pygplates.ResolvedTopologicalNetwork.html#pygplates.ResolvedTopologicalNetwork" title="pygplates.ResolvedTopologicalNetwork"><tt class="xref py py-class docutils literal"><span class="pre">ResolvedTopologicalNetwork</span></tt></a>. For <a class="reference internal" href="pygplates.reconstruct.html#pygplates.reconstruct" title="pygplates.reconstruct"><tt class="xref py py-func docutils literal"><span class="pre">reconstructed</span> <span class="pre">geometries</span></tt></a>, a <a class="reference internal" href="pygplates.ReconstructedFeatureGeometry.html#pygplates.ReconstructedFeatureGeometry" title="pygplates.ReconstructedFeatureGeometry"><tt class="xref py py-class docutils literal"><span class="pre">ReconstructedFeatureGeometry</span></tt></a>
is only included if its reconstructed geometry is a <a class="reference internal" href="pygplates.PolygonOnSphere.html#pygplates.PolygonOnSphere" title="pygplates.PolygonOnSphere"><tt class="xref py py-class docutils literal"><span class="pre">PolygonOnSphere</span></tt></a>.</p>
</div>
<p>So while the partitioning polygons are reconstructed/resolved to the reconstruction time before testing for overlap/intersection,
the geometries in the features to be partitioned (<em>features_to_partition</em>) are not since they effectively represent a snapshot of the features at the reconstruction time.
In other words the features to be partitioned effectively contain geometry at the reconstruction time (rather than present day) and hence they are <em>not</em> reconstructed
to the reconstruction time before testing for overlap/intersection with the partitioning plates (even if they already happen to have a reconstruction plate ID property).</p>
<p>To partition features at present day (and assign reconstruction plate IDs) and write them to a new file:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">features</span> <span class="o">=</span> <span class="n">pygplates</span><span class="o">.</span><span class="n">partition_into_plates</span><span class="p">(</span>
        <span class="s1">&#39;static_polygons.gpml&#39;</span><span class="p">,</span>
        <span class="s1">&#39;rotations.rot&#39;</span><span class="p">,</span>
        <span class="s1">&#39;features_to_partition.gpml&#39;</span><span class="p">)</span>

<span class="n">feature_collection</span> <span class="o">=</span> <span class="n">pygplates</span><span class="o">.</span><span class="n">FeatureCollection</span><span class="p">(</span><span class="n">features</span><span class="p">)</span>
<span class="n">feature_collection</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;partitioned_and_unpartitioned_features.gpml&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p><em>partition_method</em> specifies how the features are to be partitioned by the partitioning plates.</p>
<p><em>partition_method</em> supports the following enumeration values:</p>
<table border="1" class="docutils">
<colgroup>
<col width="38%" />
<col width="62%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Value</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><em>PartitionMethod.split_into_plates</em></td>
<td><p class="first">Split each feature into partitioning plates and into unpartitioned parts that
are outside all partitioning plates (if plates don&#8217;t have global coverage).</p>
<p>For example, if a feature overlaps two plates then it will get cloned twice.
Each clone will have its geometry set to the part of the original feature geometry
contained within the respective partitioning plate. Any part (or parts) of the
original feature geometry outside all the plates will result in a third cloned
feature containing the unpartitioned geometry(s).</p>
<p class="last">The two partitioned cloned features will have properties copied from the
respective partitioned plate feature (as determined by <em>properties_to_copy</em>).
The unpartitioned cloned feature will not have any properties copied to it.</p>
</td>
</tr>
<tr class="row-odd"><td><em>PartitionMethod.most_overlapping_plate</em></td>
<td><p class="first">Don&#8217;t split each feature into partitioning plates, instead use the partitioning
plate that most overlaps the feature&#8217;s geometry.</p>
<p>For example, if a feature overlaps two plates then it will still only get cloned
once (and its geometry unmodified). Only the most overlapping partitioning plate
(if any) is selected. The overlap is measured based on the length of the polyline
or polygon geometry contained within each partitioning plate (or number of points
if geometry is a multipoint or point).</p>
<p>The cloned feature will have properties copied from the most overlapping
partitioned plate feature (as determined by <em>properties_to_copy</em>) if it overlaps
any, otherwise it will not have any properties copied to it.</p>
<p class="last">Note that if a feature contains multiple geometries then they are treated as one
composite geometry in the overlap calculation.</p>
</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">VirtualGeomagneticPole features (of <a class="reference internal" href="pygplates.FeatureType.html#pygplates.FeatureType" title="pygplates.FeatureType"><tt class="xref py py-class docutils literal"><span class="pre">type</span></tt></a> <tt class="docutils literal"><span class="pre">FeatureType.gpml_virtual_geomagnetic_pole</span></tt>) ignore <em>partition_method</em>
since these features are always partitioned using the average sample site position (<tt class="docutils literal"><span class="pre">PropertyName.gpml_average_sample_site_position</span></tt>).
The pole position (<tt class="docutils literal"><span class="pre">PropertyName.gpml_pole_position</span></tt>) is not used during the partitioning.</p>
</div>
<p>To assign reconstruction plate IDs to features using the most overlapping partitioning plate:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">features</span> <span class="o">=</span> <span class="n">pygplates</span><span class="o">.</span><span class="n">partition_into_plates</span><span class="p">(</span>
        <span class="s1">&#39;static_polygons.gpml&#39;</span><span class="p">,</span>
        <span class="s1">&#39;rotations.rot&#39;</span><span class="p">,</span>
        <span class="s1">&#39;features_to_partition.gpml&#39;</span><span class="p">,</span>
        <span class="n">partition_method</span> <span class="o">=</span> <span class="n">pygplates</span><span class="o">.</span><span class="n">PartitionMethod</span><span class="o">.</span><span class="n">most_overlapping_plate</span><span class="p">)</span>
</pre></div>
</div>
<p><em>properties_to_copy</em> specifies the properties to copy from the partitioning features to the features that are being partitioned.</p>
<p><em>properties_to_copy</em> supports a sequence of any of the following arguments:</p>
<table border="1" class="docutils">
<colgroup>
<col width="39%" />
<col width="61%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Type</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><em>PartitionProperty.reconstruction_plate_id</em></td>
<td>The reconstruction plate ID. This is an alternative to specifying the property
name <tt class="docutils literal"><span class="pre">PropertyName.gpml_reconstruction_plate_id</span></tt>.</td>
</tr>
<tr class="row-odd"><td><em>PartitionProperty.valid_time_period</em></td>
<td>The valid time period. This is an alternative to specifying the property name
<tt class="docutils literal"><span class="pre">PropertyName.gml_valid_time</span></tt>.</td>
</tr>
<tr class="row-even"><td><em>PartitionProperty.valid_time_begin</em></td>
<td><p class="first">Only the <em>begin</em> time of the valid time period of the partitioning feature is
copied (the <em>end</em> time remains unchanged). If the <em>begin</em> time is later than
(has a smaller value than) the <em>end</em> time then it is set to the <em>end</em> time.</p>
<p class="last">Note that there is no equivalent way to specify this using a <em>PropertyName</em>.</p>
</td>
</tr>
<tr class="row-odd"><td><em>PartitionProperty.valid_time_end</em></td>
<td><p class="first">Only the <em>end</em> time of the valid time period of the partitioning feature is
copied (the <em>begin</em> time remains unchanged). If the <em>end</em> time is earlier than
(has a larger value) the <em>begin</em> time then it is set to the <em>begin</em> time.</p>
<p class="last">Note that there is no equivalent way to specify this using a <em>PropertyName</em>.</p>
</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="pygplates.PropertyName.html#pygplates.PropertyName" title="pygplates.PropertyName"><tt class="xref py py-class docutils literal"><span class="pre">PropertyName</span></tt></a></td>
<td>Any property name. If the partitioning feature has one or more properties
with this name then they will be copied/cloned to the feature being partitioned
provided its <a class="reference internal" href="pygplates.FeatureType.html#pygplates.FeatureType" title="pygplates.FeatureType"><tt class="xref py py-class docutils literal"><span class="pre">feature</span> <span class="pre">type</span></tt></a> supports the property name.</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If a property cannot copied into a feature (eg, because the property is not supported the feature&#8217;s type) then that copy is silently ignored.</p>
</div>
<p>To copy/assign reconstruction plate ID, valid time period and name from the partitioning features to their associated partitioned features:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">features</span> <span class="o">=</span> <span class="n">pygplates</span><span class="o">.</span><span class="n">partition_into_plates</span><span class="p">(</span>
        <span class="s1">&#39;static_polygons.gpml&#39;</span><span class="p">,</span>
        <span class="s1">&#39;rotations.rot&#39;</span><span class="p">,</span>
        <span class="s1">&#39;features_to_partition.gpml&#39;</span><span class="p">,</span>
        <span class="n">properties_to_copy</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">pygplates</span><span class="o">.</span><span class="n">PartitionProperty</span><span class="o">.</span><span class="n">reconstruction_plate_id</span><span class="p">,</span>
            <span class="n">pygplates</span><span class="o">.</span><span class="n">PartitionProperty</span><span class="o">.</span><span class="n">valid_time_period</span><span class="p">,</span>
            <span class="n">pygplates</span><span class="o">.</span><span class="n">PropertyName</span><span class="o">.</span><span class="n">gml_name</span><span class="p">])</span>
</pre></div>
</div>
<p><em>properties_to_copy</em> can also be a single callable (function):</p>
<table border="1" class="docutils">
<colgroup>
<col width="39%" />
<col width="61%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Type</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Arbitrary callable (function)</td>
<td><p class="first">A callable accepting the following arguments:</p>
<ul class="simple">
<li>the partitioning <a class="reference internal" href="pygplates.Feature.html#pygplates.Feature" title="pygplates.Feature"><tt class="xref py py-class docutils literal"><span class="pre">feature</span></tt></a></li>
<li>the <a class="reference internal" href="pygplates.Feature.html#pygplates.Feature" title="pygplates.Feature"><tt class="xref py py-class docutils literal"><span class="pre">feature</span></tt></a> being partitioned</li>
</ul>
<p class="last">This can be used to write your own implementation for copying properties.</p>
</td>
</tr>
</tbody>
</table>
<p>An alternative way to copy/assign reconstruction plate ID, valid time period and name from the partitioning features to their associated partitioned features:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">properties_to_copy_func</span><span class="p">(</span><span class="n">partitioning_feature</span><span class="p">,</span> <span class="n">feature</span><span class="p">):</span>
    <span class="c1"># If a property cannot be set on the feature (eg, because not supported by feature type)</span>
    <span class="c1"># then don&#39;t copy that property (ie, do nothing if pygplates.InformationModelError is raised).</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">feature</span><span class="o">.</span><span class="n">set_reconstruction_plate_id</span><span class="p">(</span><span class="n">partitioning_feature</span><span class="o">.</span><span class="n">get_reconstruction_plate_id</span><span class="p">())</span>
    <span class="k">except</span> <span class="n">pygplates</span><span class="o">.</span><span class="n">InformationModelError</span><span class="p">:</span>
        <span class="k">pass</span>
        
    <span class="n">begin</span><span class="p">,</span> <span class="n">end</span> <span class="o">=</span> <span class="n">partitioning_feature</span><span class="o">.</span><span class="n">get_valid_time</span><span class="p">()</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">feature</span><span class="o">.</span><span class="n">set_valid_time</span><span class="p">(</span><span class="n">begin</span><span class="p">,</span> <span class="n">end</span><span class="p">)</span>
    <span class="k">except</span> <span class="n">pygplates</span><span class="o">.</span><span class="n">InformationModelError</span><span class="p">:</span>
        <span class="k">pass</span>
        
    <span class="k">try</span><span class="p">:</span>
        <span class="n">feature</span><span class="o">.</span><span class="n">set_name</span><span class="p">(</span><span class="n">partitioning_feature</span><span class="o">.</span><span class="n">get_name</span><span class="p">())</span>
    <span class="k">except</span> <span class="n">pygplates</span><span class="o">.</span><span class="n">InformationModelError</span><span class="p">:</span>
        <span class="k">pass</span>
        
    <span class="k">except</span> <span class="n">pygplates</span><span class="o">.</span><span class="n">InformationModelError</span><span class="p">:</span>
        <span class="k">pass</span>


<span class="n">features</span> <span class="o">=</span> <span class="n">pygplates</span><span class="o">.</span><span class="n">partition_into_plates</span><span class="p">(</span>
        <span class="s1">&#39;static_polygons.gpml&#39;</span><span class="p">,</span>
        <span class="s1">&#39;rotations.rot&#39;</span><span class="p">,</span>
        <span class="s1">&#39;features_to_partition.gpml&#39;</span><span class="p">,</span>
        <span class="n">properties_to_copy</span> <span class="o">=</span> <span class="n">properties_to_copy_func</span><span class="p">)</span>
</pre></div>
</div>
<p><em>partition_return</em> specifies how the features are to be partitioned by the partitioning plates. This applies regardless of the value of <em>partition_method</em>.</p>
<p><em>partition_return</em> supports the following enumeration values:</p>
<table border="1" class="docutils">
<colgroup>
<col width="29%" />
<col width="29%" />
<col width="42%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Value</th>
<th class="head">Return Type</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><em>PartitionReturn.combined_partitioned_and_unpartitioned</em></td>
<td><tt class="docutils literal"><span class="pre">list</span></tt> of <a class="reference internal" href="pygplates.Feature.html#pygplates.Feature" title="pygplates.Feature"><tt class="xref py py-class docutils literal"><span class="pre">Feature</span></tt></a></td>
<td>Return a single combined <tt class="docutils literal"><span class="pre">list</span></tt> of partitioned and unpartitioned features.</td>
</tr>
<tr class="row-odd"><td><em>PartitionReturn.separate_partitioned_and_unpartitioned</em></td>
<td>2-tuple (
<tt class="docutils literal"><span class="pre">list</span></tt> of partitioned <a class="reference internal" href="pygplates.Feature.html#pygplates.Feature" title="pygplates.Feature"><tt class="xref py py-class docutils literal"><span class="pre">features</span></tt></a>,
<tt class="docutils literal"><span class="pre">list</span></tt> of unpartitioned <a class="reference internal" href="pygplates.Feature.html#pygplates.Feature" title="pygplates.Feature"><tt class="xref py py-class docutils literal"><span class="pre">features</span></tt></a>)</td>
<td>Return a 2-tuple whose first element is a <tt class="docutils literal"><span class="pre">list</span></tt> of partitioned  features and
whose second element is a <tt class="docutils literal"><span class="pre">list</span></tt> of unpartitioned  features.</td>
</tr>
<tr class="row-even"><td><em>PartitionReturn.partitioned_groups_and_unpartitioned</em></td>
<td>2-tuple (
<tt class="docutils literal"><span class="pre">list</span></tt> of 2-tuple (
<a class="reference internal" href="pygplates.ReconstructionGeometry.html#pygplates.ReconstructionGeometry" title="pygplates.ReconstructionGeometry"><tt class="xref py py-class docutils literal"><span class="pre">partitioning</span> <span class="pre">plate</span></tt></a>,
<tt class="docutils literal"><span class="pre">list</span></tt> of partitioned <a class="reference internal" href="pygplates.Feature.html#pygplates.Feature" title="pygplates.Feature"><tt class="xref py py-class docutils literal"><span class="pre">features</span></tt></a>),
<tt class="docutils literal"><span class="pre">list</span></tt> of unpartitioned <a class="reference internal" href="pygplates.Feature.html#pygplates.Feature" title="pygplates.Feature"><tt class="xref py py-class docutils literal"><span class="pre">features</span></tt></a>)</td>
<td><p class="first">Return a 2-tuple whose first element is a <tt class="docutils literal"><span class="pre">list</span></tt> of partitioned groups and
whose second element is a <tt class="docutils literal"><span class="pre">list</span></tt> of unpartitioned features.</p>
<p class="last">Each partitioned group associates a partitioning plate with its partitioned
features and consists of a 2-tuple whose first element is the partitioning plate
and whose second element is a <tt class="docutils literal"><span class="pre">list</span></tt> of features partitioned by that plate.</p>
</td>
</tr>
</tbody>
</table>
<p>To reset the reconstruction plate ID (to zero) for all unpartitioned features (features that did not intersect any partitioning plates):</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">partitioned_features</span><span class="p">,</span> <span class="n">unpartitioned_features</span> <span class="o">=</span> <span class="n">pygplates</span><span class="o">.</span><span class="n">partition_into_plates</span><span class="p">(</span>
        <span class="s1">&#39;static_polygons.gpml&#39;</span><span class="p">,</span>
        <span class="s1">&#39;rotations.rot&#39;</span><span class="p">,</span>
        <span class="s1">&#39;features_to_partition.gpml&#39;</span><span class="p">,</span>
        <span class="n">partition_return</span> <span class="o">=</span> <span class="n">pygplates</span><span class="o">.</span><span class="n">PartitionReturn</span><span class="o">.</span><span class="n">separate_partitioned_and_unpartitioned</span><span class="p">)</span>

<span class="k">for</span> <span class="n">unpartitioned_feature</span> <span class="ow">in</span> <span class="n">unpartitioned_features</span><span class="p">:</span>
    <span class="n">unpartitioned_feature</span><span class="o">.</span><span class="n">set_reconstruction_plate_id</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</pre></div>
</div>
<p>...this is useful when the features to be partitioned already have reconstruction plate IDs but
they are deemed to be incorrect. By resetting them to zero we ensure the unpartitioned features remain stationary
and do not reconstruct incorrectly over geological time. Any partitioned features will get a new plate ID.</p>
<p><em>sort_partitioning_plates</em> determines the sorting criteria used to order the partitioning plates:</p>
<table border="1" class="docutils">
<colgroup>
<col width="40%" />
<col width="60%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Value</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>SortPartitioningPlates.by_partition_type</td>
<td>Group in order of resolved topological networks then resolved topological boundaries
then reconstructed static polygons, but with no sorting within each group
(ordering within each group is unchanged).</td>
</tr>
<tr class="row-odd"><td>SortPartitioningPlates.by_partition_type_then_plate_id</td>
<td>Same as <em>by_partition_type</em>, but also sort by plate ID (from highest to lowest)
within each partition type group.</td>
</tr>
<tr class="row-even"><td>SortPartitioningPlates.by_partition_type_then_plate_area</td>
<td>Same as <em>by_partition_type</em>, but also sort by plate area (from highest to lowest)
within each partition type group.</td>
</tr>
<tr class="row-odd"><td>SortPartitioningPlates.by_plate_id</td>
<td>Sort by plate ID (from highest to lowest), but no grouping by partition type.</td>
</tr>
<tr class="row-even"><td>SortPartitioningPlates.by_plate_area</td>
<td>Sort by plate area (from highest to lowest), but no grouping by partition type.</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>If you don&#8217;t want to sort the partitioning plates (for example, if you have already sorted them)
then you&#8217;ll need to explicitly specify <tt class="docutils literal"><span class="pre">None</span></tt> for the <em>sort_partitioning_plates</em> parameter
(eg, <tt class="docutils literal"><span class="pre">pygplates.partition_into_plates(...,</span> <span class="pre">sort_partitioning_plates=None)</span></tt>).</p>
<p class="last">This is because not specifying anything defaults to <em>SortPartitioningPlates.by_partition_type_then_plate_id</em>
(since this always gives deterministic partitioning results).</p>
</div>
<p>If the partitioning plates overlap each other then their final ordering determines the partitioning results.
Resolved topologies do not tend to overlap, but reconstructed static polygons do overlap
(for non-zero reconstruction times) and hence the sorting order becomes relevant.</p>
<p>Partitioning of points is more efficient if you sort by plate <em>area</em> because an arbitrary
point is likely to be found sooner when testing against larger partitioning polygons first
(and hence more remaining partitioning polygons can be skipped). Since resolved topologies don&#8217;t tend
to overlap you don&#8217;t need to sort them by plate <em>ID</em> to get deterministic partitioning results.
So we are free to sort by plate <em>area</em> (well, plate area is also deterministic but not as deterministic
as sorting by plate <em>ID</em> since modifications to the plate geometries change their areas but not their plate IDs).
Note that we also group by partition type in case the topological networks happen
to overlay the topological plate boundaries (usually this isn&#8217;t the case though):</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">features</span> <span class="o">=</span> <span class="n">pygplates</span><span class="o">.</span><span class="n">partition_into_plates</span><span class="p">(</span><span class="o">...</span><span class="p">,</span>
    <span class="n">sort_partitioning_plates</span><span class="o">=</span><span class="n">pygplates</span><span class="o">.</span><span class="n">SortPartitioningPlates</span><span class="o">.</span><span class="n">by_partition_type_then_plate_area</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p><a class="reference internal" href="pygplates.PlatePartitioner.html#pygplates.PlatePartitioner.partition_features" title="pygplates.PlatePartitioner.partition_features"><tt class="xref py py-meth docutils literal"><span class="pre">PlatePartitioner.partition_features()</span></tt></a></p>
<p><a class="reference internal" href="#pygplates.partition_into_plates" title="pygplates.partition_into_plates"><tt class="xref py py-func docutils literal"><span class="pre">partition_into_plates()</span></tt></a> is a convenience function that essentially uses
<a class="reference internal" href="pygplates.PlatePartitioner.html#pygplates.PlatePartitioner.partition_features" title="pygplates.PlatePartitioner.partition_features"><tt class="xref py py-meth docutils literal"><span class="pre">PlatePartitioner.partition_features()</span></tt></a> in the following way:</p>
<div class="last highlight-python"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">partition_into_plates</span><span class="p">(</span>
        <span class="n">partitioning_features</span><span class="p">,</span>
        <span class="n">rotation_model</span><span class="p">,</span>
        <span class="n">features_to_partition</span><span class="p">,</span>
        <span class="n">properties_to_copy</span> <span class="o">=</span> <span class="p">[</span><span class="n">PartitionProperty</span><span class="o">.</span><span class="n">reconstruction_plate_id</span><span class="p">],</span>
        <span class="n">reconstruction_time</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
        <span class="n">partition_method</span> <span class="o">=</span> <span class="n">PartitionMethod</span><span class="o">.</span><span class="n">split_into_plates</span><span class="p">,</span>
        <span class="n">partition_return</span> <span class="o">=</span> <span class="n">PartitionReturn</span><span class="o">.</span><span class="n">combined_partitioned_and_unpartitioned</span><span class="p">,</span>
        <span class="n">sort_partitioning_plates</span> <span class="o">=</span> <span class="n">pygplates</span><span class="o">.</span><span class="n">SortPartitioningPlates</span><span class="o">.</span><span class="n">by_partition_type_then_plate_id</span><span class="p">):</span>
    
    <span class="n">plate_partitioner</span> <span class="o">=</span> <span class="n">pygplates</span><span class="o">.</span><span class="n">PlatePartitioner</span><span class="p">(</span><span class="n">partitioning_features</span><span class="p">,</span> <span class="n">rotation_model</span><span class="p">,</span> <span class="n">reconstruction_time</span><span class="p">,</span> <span class="n">sort_partitioning_plates</span><span class="p">)</span>
    
    <span class="k">return</span> <span class="n">plate_partitioner</span><span class="o">.</span><span class="n">partition_features</span><span class="p">(</span><span class="n">features_to_partition</span><span class="p">,</span> <span class="n">properties_to_copy</span><span class="p">,</span> <span class="n">partition_method</span><span class="p">,</span> <span class="n">partition_return</span><span class="p">)</span>
</pre></div>
</div>
</div>
</dd></dl>

</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h4>Previous topic</h4>
  <p class="topless"><a href="pygplates.synchronise_crossovers.html"
                        title="previous chapter">pygplates.synchronise_crossovers</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="pygplates.PlatePartitioner.html"
                        title="next chapter">pygplates.PlatePartitioner</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../_sources/generated/pygplates.partition_into_plates.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="pygplates.PlatePartitioner.html" title="pygplates.PlatePartitioner"
             >next</a> |</li>
        <li class="right" >
          <a href="pygplates.synchronise_crossovers.html" title="pygplates.synchronise_crossovers"
             >previous</a> |</li>
        <li><a href="../index.html">pygplates 2.1.0.18 documentation</a> &raquo;</li>
          <li><a href="../pygplates_reference.html" >Reference</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright (C) 2003-2016 The University of Sydney, Australia
(C) 2004-2016 California Institute of Technology
(C) 2007-2016 The Geological Survey of Norway
.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.3.
    </div>
  </body>
</html>